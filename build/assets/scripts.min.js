var app={canvas:document.querySelector(".canvas"),error:function(e){var t=document.createElement("p");t.textContent="Sorry, something went wrong. Try again.",document.querySelector(".header").appendChild(t),console.error("Error:",e)},color:function(e,t){t=parseInt(t);for(var a=1;a<6;a++){if(t<=Math.pow(10,a))return e.setAttribute("data-infected",a)}},dimmer:function(e){for(var t=app.canvas.querySelectorAll("svg [data-infected]"),a=0;a<t.length;a++){var n=app.canvas.querySelector('svg [title="'+e+'"]');t[a]!==n&&t[a].removeAttribute("data-infected")}},row:function(e){e.preventDefault();for(var t=this.hasAttribute("data-infected"),a=this.parentNode.querySelectorAll("tr"),n=0;n<a.length;n++)a[n].removeAttribute("data-infected");app.paint(),!1===t&&(app.color(this,this.getAttribute("data-cases")),app.dimmer(this.getAttribute("data-region")))},info:function(){var e=app.data,t=document.createElement("table"),a=document.createElement("tr");t.appendChild(a);for(var n=["Region","Cases","Deaths"],r=0;r<n.length;r++){var o=document.createElement("th");o.textContent=n[r],a.appendChild(o)}for(r=0;r<e.length;r++){var p=document.createElement("tr");for(key in p.addEventListener("click",app.row),e[r]){var i=document.createElement("td");i.textContent=e[r][key],p.setAttribute("data-"+key,e[r][key]),p.appendChild(i)}t.appendChild(p)}var d=document.createElement("div");d.classList.add("info"),d.appendChild(t),app.canvas.insertBefore(d,app.canvas.firstChild)},paint:function(){for(var e=app.data,t=0;t<e.length;t++){var a=e[t],n=app.canvas.querySelector('svg [title="'+a.region+'"]');null!==n&&app.color(n,a.cases)}},draw:function(e){app.data=e,0<app.data.length&&app.info(),app.paint(),app.canvas.classList.add("canvas--visible")},request:function(){var e=new XMLHttpRequest;e.open("GET","/data.json",!0),e.responseType="json",e.onload=function(){if(200===e.status)return app.draw(e.response);app.error("Wrong request status")},e.onerror=function(){app.error("Can't load data.json file")},e.send()},init:function(){app.request()}};app.init();